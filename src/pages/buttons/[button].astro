---
import Layout from '../../layouts/Layout.astro';
import { Code } from 'astro:components';
import type { BundledLanguage } from 'shiki'; 
import { componentsData } from '../../data/buttonsData';
import { buttonsBlocks as ComponentsPreviews } from "@/components/ui/button/blocks/buttonsBlocks"
import CopyIcon from '@/assets/icons/copyIcon.astro';
import CheckIcon from '@/assets/icons/checkIcon.astro';
import Sidebar from '@/components/home/Sidebar.astro';

const selectedComponent = ComponentsPreviews.find((comp) => comp.id === Astro.params.button);
const selectedCode = componentsData.find((code) => code.id === Astro.params.button);

if (!selectedComponent || !selectedCode) {
	throw new Error(`Component or code with id "${Astro.params.button}" not found`);
}

export function getStaticPaths() {
  return componentsData.map((comp) => ({
    params: { button: comp.id },
  }));
}

---

<Layout title={`UIComponents | @orbitui - ${selectedComponent.title}`}>
	<section class="w-full px-4 py-12 sm:px-6 lg:px-8">
		<Sidebar currentPage='buttons'/>
		<article class="flex flex-col gap-20 justify-center items-center">
			<header class="flex flex-col gap-10 justify-center items-center font-chakra w-1/2">
				<div class="flex justify-center flex-col md:flex-row gap-5 bg-slate-600/30 border border-gray-500 p-6 sm:p-8 md:p-10 rounded-2xl max-w-3xl">
					<selectedComponent.component />
				</div>
			</header>

			<footer class="flex flex-col gap-y-10 justify-center items-center w-full">
				<div class="group relative w-full max-w-4xl px-2 py-10 sm:px-4 overflow-x-auto">
					<Code code={`${selectedCode.code}`} lang={selectedCode.lang as BundledLanguage} wrap />
					<p class="component-name">{selectedCode.id.charAt(0).toUpperCase() + selectedCode.id.slice(1)}.{selectedCode.lang}</p>
					<div class="absolute top-13 right-7 flex justify-end items-center gap-5">
					<button role="button" aria-label="Copiar IP" class="copy-button text-white px-1 py-1 rounded-sm hover:bg-slate-600/80 transition-colors duration-300 cursor-pointer">
						<CopyIcon class="copy-icon size-3"/>
						<CheckIcon class="copy-icon-check hidden size-3"/>
					</button>
					</div>
				</div>
			</footer>
		</article>
	</section>
</Layout>
